!function(a){a.fn.rssfeed=function(c,d,e){var f={limit:10,offset:1,header:!0,titletag:"h4",date:!0,dateformat:"datetime",content:!0,snippet:!0,media:!0,showerror:!0,errormsg:"",key:null,ssl:!1,linktarget:"_self",linkredirect:"",linkcontent:!1,sort:"",sortasc:!0,historical:!1},d=a.extend(f,d);return this.each(function(f,g){var h=a(g),i="";if(d.ssl&&(i="s"),h.hasClass("rssFeed")||h.addClass("rssFeed"),null==c)return!1;d.offset>0&&(d.offset-=1),d.limit+=d.offset;var j="http"+i+"://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(c);j+="&num="+d.limit,d.historical&&(j+="&scoring=h"),null!=d.key&&(j+="&key="+d.key),j+="&output=json_xml",a.getJSON(j,function(c){if(200==c.responseStatus)b(g,c.responseData,d),a.isFunction(e)&&e.call(this,h);else{if(d.showerror)if(""!=d.errormsg)var f=d.errormsg;else var f=c.responseDetails;a(g).html('<div class="rssError"><p>'+f+"</p></div>")}})})};var b=function(b,e,f){var i=e.feed;if(!i)return!1;var j=[],k=0,l="",m="odd";if(f.media)var n=g(e.xmlString),o=n.getElementsByTagName("item");f.header&&(l+='<div class="rssHeader"><a href="'+i.link+'" title="'+i.description+'">'+i.title+"</a>"+"</div>"),l+='<div class="rssBody"><ul>';for(var p=f.offset;p<i.entries.length;p++){k=p-f.offset,j[k]=[];var r,q=i.entries[p],s="",t=q.link;switch(f.sort){case"title":s=q.title;break;case"date":s=q.publishedDate}if(j[k].sort=s,q.publishedDate){var u=new Date(q.publishedDate),r=u.toLocaleDateString()+" "+u.toLocaleTimeString();switch(f.dateformat){case"datetime":break;case"date":r=u.toLocaleDateString();break;case"time":r=u.toLocaleTimeString();break;case"timeline":r=h(u);break;default:r=d(u,f.dateformat)}}if(f.linkredirect&&(t=encodeURIComponent(t)),j[k].html="<"+f.titletag+'><a href="'+f.linkredirect+t+'" title="View this feed at '+i.title+'">'+q.title+"</a></"+f.titletag+">",f.date&&r&&(j[k].html+='<div class="date">'+r+"</div>"),f.content){if(f.snippet&&""!=q.contentSnippet)var v=q.contentSnippet;else var v=q.content;f.linkcontent&&(v='<a href="'+f.linkredirect+t+'" title="View this feed at '+i.title+'">'+v+"</a>"),j[k].html+="<p>"+v+"</p>"}if(f.media&&o.length>0){var w=o[p].getElementsByTagName("enclosure");if(w.length>0){j[k].html+='<div class="rssMedia"><div>Media files</div><ul>';for(var x=0;x<w.length;x++){var y=w[x].getAttribute("url"),z=w[x].getAttribute("type"),A=w[x].getAttribute("length");j[k].html+='<li><a href="'+y+'" title="Download this media">'+y.split("/").pop()+"</a> ("+z+", "+c(A)+")</li>"}j[k].html+="</ul></div>"}}}f.sort&&j.sort(function(a,b){if(f.sortasc)var c=a.sort,d=b.sort;else var c=b.sort,d=a.sort;return"date"==f.sort?new Date(c)-new Date(d):(c=c.toLowerCase(),d=d.toLowerCase(),d>c?-1:c>d?1:0)}),a.each(j,function(a){l+='<li class="rssRow '+m+'">'+j[a].html+"</li>",m="odd"==m?"even":"odd"}),l+="</ul></div>",a(b).html(l),a("a",b).attr("target",f.linktarget)},c=function(a){var b=["bytes","kb","MB","GB","TB","PB"],c=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(c))).toFixed(2)+" "+b[c]},d=function(a,b){var c=new Date(a);return a=b,a=a.replace("dd",e(c.getDate())),a=a.replace("MMMM",f(c.getMonth())),a=a.replace("MM",e(c.getMonth()+1)),a=a.replace("yyyy",c.getFullYear()),a=a.replace("hh",e(c.getHours())),a=a.replace("mm",e(c.getMinutes())),a=a.replace("ss",e(c.getSeconds()))},e=function(a){return a+="",a.length<2&&(a="0"+a),a},f=function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b[a]},g=function(a){var c,b=navigator.appName;return"Microsoft Internet Explorer"==b?(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a)):c=(new DOMParser).parseFromString(a,"text/xml"),c},h=function(a){var b=new Date,c=new Date(a),d=Math.round((b.getTime()-c.getTime())/1e3);if(60>d)return"< 1 min";if(3600>d)var e=Math.round(d/60)-1,f="min";else if(86400>d)var e=Math.round(d/3600)-1,f="hour";else if(604800>d)var e=Math.round(d/86400)-1,f="day";else var e=Math.round(d/604800)-1,f="week";return e>1&&(f+="s"),e+" "+f}}(jQuery);